<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>96h REST API documentation</title>
    <script src="./js/script.js" defer></script>
    <script src="./js/jquery-3.6.3.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- Navbar -->
    <nav
      id="navbar"
      class="navbar navbar-expand-lg sticky-top bg-body-tertiary border-bottom"
    >
      <div class="container-fluid">
        <a class="navbar-brand" href="mailto:jav.rodrigo.alonso@gmail.com"
          >J. Rodrigo</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#controllers">Controllers</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#apiexample">API Example</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Title -->
    <div class="container py-4">
      <h2>
        <strong><u>96h REST API documentation</u></strong>
      </h2>
      <code>{ Base URL: <span>localhost:8080</span> }</code>
    </div>
    <hr />

    <!-- Controllers explained -->
    <div id="controllers" class="container">
      <h2 class="m-3"><u>Controllers</u></h2>
    </div>
    <div class="container">
      <div class="accordion accordion-flush" id="accordionFlushExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="flush-headingOne">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#flush-collapseOne"
              aria-expanded="false"
              aria-controls="flush-collapseOne"
            >
              <div class="btn btn-secondary pr-3">POST</div>
              <strong class="ps-2">/upload_image</strong>
            </button>
          </h2>
          <div
            id="flush-collapseOne"
            class="accordion-collapse collapse"
            aria-labelledby="flush-headingOne"
            data-bs-parent="#accordionFlushExample"
          >
            <div class="accordion-body">
              <span>Sample URL: </span
              ><code
                >{ Sample URL: <span>localhost:8080/upload_image</span> }</code
              ><br /><br />
              <strong>Parameters:</strong>
              <table class="table">
                <tr>
                  <td class="col-md-1">Name</td>
                  <td class="col-md-6">Description</td>
                </tr>
                <!--                         <tr>
                            <td>AuthorizationToken</td>   
                            <td>Token used to authenticate user</td>
                        </tr>  -->
                <tr>
                  <td>file</td>
                  <td>
                    Image specified by the user. Only formats .png, .jpeg and
                    .jpg accepted
                  </td>
                </tr>
              </table>
              <strong>Response:</strong>
              <table class="table">
                <tr>
                  <td class="col-md-1">Code</td>
                  <td class="col-md-6">Description</td>
                </tr>
                <tr>
                  <td>201</td>
                  <td>
                    Successful request and response, new resource image created
                    at the server.
                  </td>
                </tr>
                <tr>
                  <td>400</td>
                  <td>Malformed parameters or other bad request.</td>
                </tr>
                <tr>
                  <td>415</td>
                  <td>Incorrect file extension</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="flush-headingTwo">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#flush-collapseTwo"
              aria-expanded="false"
              aria-controls="flush-collapseTwo"
            >
              <div class="btn btn-primary">GET</div>
              <strong class="ps-2">/list_images</strong>
            </button>
          </h2>
          <div
            id="flush-collapseTwo"
            class="accordion-collapse collapse"
            aria-labelledby="flush-headingTwo"
            data-bs-parent="#accordionFlushExample"
          >
            <div class="accordion-body">
              <span>Sample URL: </span
              ><code
                >{ Sample URL: <span>localhost:8080/list_images</span> }</code
              ><br /><br />
              <!--                     <strong>Parameters:</strong>
                    <table class="table">
                        <tr>
                            <td class="col-md-1">Name</td>
                            <td class="col-md-6">Description</th>
            </tr>
                        <tr>
                            <td>AuthorizationToken</td>   
                            <td>Token used to authenticate user</td>
                        </tr> 
                      </table> -->
              <strong>Response:</strong>
              <table class="table">
                <tr>
                  <td class="col-md-1">Code</td>
                  <td class="col-md-6">Description</td>
                </tr>
                <tr>
                  <td>200</td>
                  <td>Successful request and response.</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="flush-headingThree">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#flush-collapseThree"
              aria-expanded="false"
              aria-controls="flush-collapseThree"
            >
              <div class="btn btn-primary">GET</div>
              <strong class="ps-2">/analyse_image/{id}</strong>
            </button>
          </h2>
          <!-- /analyse_image/{id}  -->
          <div
            id="flush-collapseThree"
            class="accordion-collapse collapse"
            aria-labelledby="flush-headingThree"
            data-bs-parent="#accordionFlushExample"
          >
            <div class="accordion-body">
              <span>Sample URL: </span
              ><code
                >{ Sample URL:
                <span>localhost:8080/analyse_image/{id}</span> }</code
              ><br /><br />
              <strong>Parameters:</strong>
              <table class="table">
                <tr>
                  <td class="col-md-1">Name</td>
                  <td class="col-md-6">Description</td>
                </tr>
                <!--<tr>
                            <td>AuthorizationToken</td>   
                            <td>Token used to authenticate user</td>
                        </tr> -->
                <tr>
                  <td>id (int)</td>
                  <td>Unique ID of the image stored on the server</td>
                </tr>
              </table>
              <strong>Response:</strong>
              <table class="table">
                <tr>
                  <td class="col-md-1">Code</td>
                  <td class="col-md-6">Description</td>
                </tr>
                <tr>
                  <td>200</td>
                  <td>Successful request and response.</td>
                </tr>
                <tr>
                  <td>404</td>
                  <td>Resource not found.</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />

    <!-- API Example -->
    <div class="container">
      <h2 id="apiexample" class="m-3"><u>API Examples</u></h2>
    </div>

    <!-- Adding images -->
    <body class="container">
      <div class="container">
        <h3>Input images form</h3>
        <code>{ Base URL: <span>localhost:8080/upload_image</span> }</code>
      </div>
      <p class="m-3">
        This form send a request to the API (through AJAX) with the requested
        image.<br />Shows errors if a file is not entered or empty, and shows
        the id of the image if it is correctly uploaded.<br />Only .png, .jpg
        .jpeg files supported.
      </p>

      <div class="d-flex justify-content-center">
        <form
          name="form"
          id="inputFile"
          class="border rounded col-4 p-3 m-3"
          action="http://127.0.0.1:5000/upload_image"
          method="post"
          enctype="multipart/form-data"
        >
          <div class="form-group">
            <label for="fileInput" class="form-label">File input</label>
            <input
              type="file"
              name="file"
              class="w-60 form-control"
              id="fileInput"
            />
          </div>
          <input type="submit" value="Upload" class="btn btn-primary my-3" />
          <input type="reset" value="Reset" class="btn btn-primary" />
        </form>
      </div>
      <div class="container">
        <div id="flash" class="m-3"></div>
      </div>
      <hr />

      <!-- List images -->
      <div class="container">
        <div class="container">
          <h3>List images</h3>
          <code>{ Base URL: <span>localhost:8080/list_images</span> }</code>
        </div>
        <p class="m-3">
          When clicking the button, an AJAX request is made, asking the server
          to show a table with the uploaded images. <br />Shows personalized
          error if there's no images saved on the server.
        </p>
        <button type="button" class="btn btn-primary m-3" id="getList">
          Click here to load the images list
        </button>
        <div id="list" class="m-3"></div>
      </div>
      <hr />

      <!-- Analyse image -->
      <div class="container">
        <div class="container">
          <h3>Analyse image</h3>
          <code
            >{ Base URL: <span>localhost:8080/analyse_image/{id}</span> }</code
          >
        </div>
        <p class="m-3">
          When the request is sent, response with the height and width of the
          picture. <br />
          An example can be seen list of images, if you click on show properties
          button, a petition is made (AJAX), and the value is returned at the
          properties cell. <br />
          If there's no picture, returns error.
        </p>
        <div id="list" class="m-3"></div>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    </body>
  </body>
</html>